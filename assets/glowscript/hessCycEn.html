<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Hess's Law Demonstration</title>
    <link type="text/css" href="jquery-ui.custom.css" rel="stylesheet" />
    <link type="text/css" href="ide.css" rel="stylesheet" rel="stylesheet" />
  </head>

<body>
    <div id="glowscriptdiv" style="width:100%" class="glowscript">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery.min.js"></script>
        <script type="text/javascript" src="https://www.glowscript.org/lib/jquery/2.1/jquery-ui.custom.min.js"></script>
        <script type="text/javascript" src="https://www.glowscript.org/package/glow.3.2.min.js"></script>
        <script type="text/javascript" src="https://www.glowscript.org/package/RSrun.3.2.min.js"></script>
        <script type="text/javascript">
        
        // START JAVASCRIPT
        (function() {;
        var ρσ_modules = {};
        var sel_bond, bond_list, step, systemEnergy, f1, double, setMol, scissorMode, startMol, lasthit, lastcolor, hit, cut_button, AtomsSelected, prevAtom, prevAtomColor, drag, partScreen, c1_atom, c2_atom, h1_atom, h2_atom, h3_atom, h4_atom, h5_atom, h6_atom, h7_atom, h8_atom, o1_atom, o2_atom, o3_atom, o4_atom, o5_atom, o6_atom, o7_atom, o8_atom, initialized, energyText;
        ρσ_modules.pythonize = {};
        
        (function(){
            function strings() {
                var string_funcs, exclude, name;
                string_funcs = set("capitalize strip lstrip rstrip islower isupper isspace lower upper swapcase center count endswith startswith find rfind index rindex format join ljust rjust partition rpartition replace split rsplit splitlines zfill".split(" "));
                if (!arguments.length) {
                    exclude = (function(){
                        var s = ρσ_set();
                        s.jsset.add("split");
                        s.jsset.add("replace");
                        return s;
                    })();
                } else if (arguments[0]) {
                    exclude = Array.prototype.slice.call(arguments);
                } else {
                    exclude = null;
                }
                if (exclude) {
                    string_funcs = string_funcs.difference(set(exclude));
                }
                var ρσ_Iter0 = string_funcs;
                ρσ_Iter0 = ((typeof ρσ_Iter0[Symbol.iterator] === "function") ? (ρσ_Iter0 instanceof Map ? ρσ_Iter0.keys() : ρσ_Iter0) : Object.keys(ρσ_Iter0));
                for (var ρσ_Index0 of ρσ_Iter0) {
                    name = ρσ_Index0;
                    (ρσ_expr_temp = String.prototype)[(typeof name === "number" && name < 0) ? ρσ_expr_temp.length + name : name] = (ρσ_expr_temp = ρσ_str.prototype)[(typeof name === "number" && name < 0) ? ρσ_expr_temp.length + name : name];
                }
            };
            if (!strings.__module__) Object.defineProperties(strings, {
                __module__ : {value: "pythonize"}
            });
        
            ρσ_modules.pythonize.strings = strings;
        })();
        async function __main__() {
        "use strict";
            var display = canvas;
            var scene = canvas();
            var win = document.getElementById("glowscriptdiv").offsetWidth
            scene.width = win
        
            var version, print, arange, __name__, type, ρσ_ls, partScreen, systemEnergy, step, energyText, cut_button, sb_button, db_button, break_all, restart_button, resetEnergy_button, setMol, Egraph, f1, c1_atom, c2_atom, h1_atom, h2_atom, h3_atom, h4_atom, h5_atom, h6_atom, h7_atom, h8_atom, o1_atom, o2_atom, o3_atom, o4_atom, o5_atom, o6_atom, o7_atom, o8_atom, bond_list, scissorMode, sel_bond, lasthit, lastcolor, prevAtom, prevAtomColor, AtomsSelected, clickCounter, hit, drag, startMol;
            version = ρσ_list_decorate([ "3.2", "glowscript" ]);
            Array.prototype['+'] = function(r) {return this.concat(r)}
            Array.prototype['*'] = function(r) {return __array_times_number(this, r)}
            window.__GSlang = "vpython";
            print = GSprint;
            arange = range;
            __name__ = "__main__";
            type = pytype;
            var strings = ρσ_modules.pythonize.strings;
        
            strings();
    "11";
    partScreen = ρσ_interpolate_kwargs.call(this, canvas, [ρσ_desugar_kwargs({width: win*0.9, height:win*0.6, background: vec(.1, .1, .1), userspin: false, resizable: false})]);
    "12";
    partScreen.background = color.black;
    "13";
    partScreen.range = 9;
    "14";
    partScreen.userspin = false;
    "16";
    systemEnergy = 0;
    "17";
    step = 0;
    "20";
    partScreen.caption = ""; ρσ_interpolate_kwargs.call(this, wtext, [ρσ_desugar_kwargs({text: "Energieveränderung des Systems: ", pos: partScreen.caption_anchor})]);
    "21";
    energyText = ρσ_interpolate_kwargs.call(this, wtext, [ρσ_desugar_kwargs({text: "0.0", pos: partScreen.caption_anchor})]);
    "22";
    partScreen.append_to_caption(" kJ/mol \n");
    "23";
    cut_button = ρσ_interpolate_kwargs.call(this, button, [ρσ_desugar_kwargs({text: "✄", background: color.white, color: color.black, bind: CutBond, disabled: true})]);
    "24";
    sb_button = ρσ_interpolate_kwargs.call(this, button, [ρσ_desugar_kwargs({text: "●⚊●", background: color.white, color: color.black, bind: MakeSB, disabled: true})]);
    "25";
    db_button = ρσ_interpolate_kwargs.call(this, button, [ρσ_desugar_kwargs({text: "●⚌●", background: color.white, color: color.black, bind: MakeDB, disabled: true})]);
    "27";
    break_all = ρσ_interpolate_kwargs.call(this, button, [ρσ_desugar_kwargs({text: "●✕●✕●", background: color.white, bind: CutAllBonds})]); partScreen.append_to_caption("\n");
    "28";
    restart_button = ρσ_interpolate_kwargs.call(this, button, [ρσ_desugar_kwargs({text: "Zurücksetzen", background: color.white, color: color.black, bind: restart})]);
    "29";
    resetEnergy_button = ρσ_interpolate_kwargs.call(this, button, [ρσ_desugar_kwargs({text: "Bezugspunkt erneuern", background: color.white, color: color.black, bind: resetEnergy})]);
    "31";
    ρσ_interpolate_kwargs.call(this, wtext, [ρσ_desugar_kwargs({text: "\n\n Ausgangsmaterialien: ", pos: partScreen.caption_anchor})]);
    "32";
    setMol = ρσ_interpolate_kwargs.call(this, menu, [ρσ_desugar_kwargs({text: "set moles", choices: ρσ_list_decorate([ "CH4 + 2O2", "2CH4 + 4O2" ]), bind: setMol, disabled: false})]);
    "33";
    partScreen.append_to_caption("\n\n");
    "37";
    Egraph = ρσ_interpolate_kwargs.call(this, graph, [ρσ_desugar_kwargs({xtitle: "Schritt", ytitle: "Enthalpieänderung (kJ/mol)", width: win*0.9, xmin: 0, xmax: 20, ymin: 1["-u"]()["*"](5e3), ymax: 5e3, background: color.white})]);
    "38";
    f1 = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: Egraph, color: color.red})]);
    "39";
    f1.plot(step, systemEnergy);
    "41";
    c1_atom = c2_atom = null;
    "42";
    h1_atom = h2_atom = h3_atom = h4_atom = h5_atom = h6_atom = h7_atom = h8_atom = null;
    "43";
    o1_atom = o2_atom = o3_atom = o4_atom = o5_atom = o6_atom = o7_atom = o8_atom = null;
    "46";
    bond_list = ρσ_list_decorate([]);
    "47";
    (await Init());
    "50";
    scissorMode = false;
    "51";
    sel_bond = null;
    "52";
    lasthit = null;
    "53";
    lastcolor = null;
    "54";
    prevAtom = null;
    "55";
    prevAtomColor = null;
    "56";
    AtomsSelected = 0;
    "57";
    clickCounter = 0;
    "58";
    hit = null;
    "59";
    drag = false;
    "60";
    startMol = 1;
    "63";
    async function CutBond() {
        var ρσ_ls, enthalpyChange;
        "64";
        "65";
        if ((sel_bond !== null && (typeof sel_bond !== "object" || ρσ_not_equals(sel_bond, null)))) {
            "67";
            setMol.disabled = true;
            "68";
            sel_bond.visible = false;
            "69";
            bond_list.remove(sel_bond);
            "70";
            (await DisableButton(cut_button));
            "71";
            if (initialized) {
                "72";
                step=step["+"](1);
                "73";
                enthalpyChange = (await BondEnthalpy(ρσ_getitem(sel_bond.atoms, 0), ρσ_getitem(sel_bond.atoms, 1), sel_bond.double));
                "74";
                systemEnergy=systemEnergy["+"](enthalpyChange);
                "75";
                f1.plot(step, systemEnergy);
                "76";
                energyText.text = "{:.1f}".format(systemEnergy);
            }
        }
    };
    if (!CutBond.__module__) Object.defineProperties(CutBond, {
        __module__ : {value: null}
    });

    "78";
    async function CutAllBonds() {
        var ρσ_ls, enthalpyChange, bond;
        "79";
        "80";
        setMol.disabled = true;
        "81";
        var ρσ_Iter1 = bond_list;
        ρσ_Iter1 = ((typeof ρσ_Iter1[Symbol.iterator] === "function") ? (ρσ_Iter1 instanceof Map ? ρσ_Iter1.keys() : ρσ_Iter1) : Object.keys(ρσ_Iter1));
        for (var ρσ_Index1 of ρσ_Iter1) {
            bond = ρσ_Index1;
            "82";
            step=step["+"](1);
            "83";
            enthalpyChange = (await BondEnthalpy(ρσ_getitem(bond.atoms, 0), ρσ_getitem(bond.atoms, 1), bond.double));
            "84";
            systemEnergy=systemEnergy["+"](enthalpyChange);
            "85";
            f1.plot(step, systemEnergy);
            "86";
            bond.visible = false;
            "87";
            energyText.text = "{:.1f}".format(systemEnergy);
            "88";
            bond = undefined;
        }
        "89";
        bond_list = ρσ_list_decorate([]);
    };
    if (!CutAllBonds.__module__) Object.defineProperties(CutAllBonds, {
        __module__ : {value: null}
    });

    "91";
    async function MakeSB() {
        var ρσ_ls, old_bond, new_bond, enthalpyChange;
        "92";
        "95";
        setMol.disabled = true;
        "96";
        var ρσ_Iter2 = bond_list;
        ρσ_Iter2 = ((typeof ρσ_Iter2[Symbol.iterator] === "function") ? (ρσ_Iter2 instanceof Map ? ρσ_Iter2.keys() : ρσ_Iter2) : Object.keys(ρσ_Iter2));
        for (var ρσ_Index2 of ρσ_Iter2) {
            old_bond = ρσ_Index2;
            "97";
            if (ρσ_in(ρσ_getitem(old_bond.atoms, 0), sel_bond.atoms) && ρσ_in(ρσ_getitem(old_bond.atoms, 1), sel_bond.atoms)) {
                "98";
                bond_list.remove(old_bond);
            }
        }
        "99";
        new_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({color: color.gray(.8), radius: .05, atoms: sel_bond.atoms, double: false})]);
        "100";
        new_bond.append(ρσ_getitem(new_bond.atoms, 0).pos);
        "101";
        new_bond.append(ρσ_getitem(new_bond.atoms, 1).pos);
        "102";
        bond_list.append(new_bond);
        "103";
        (await DisableButton(sb_button));
        "104";
        (await DisableButton(db_button));
        "105";
        if (initialized) {
            "106";
            step=step["+"](1);
            "107";
            enthalpyChange = 1["-u"]()["*"](await ρσ_list_decorate(ρσ_interpolate_kwargs.call(this, BondEnthalpy, [ρσ_getitem(new_bond.atoms, 0), ρσ_getitem(new_bond.atoms, 1)].concat([ρσ_desugar_kwargs({double: false})]))));
            "108";
            systemEnergy=systemEnergy["+"](enthalpyChange);
            "109";
            f1.plot(step, systemEnergy);
            "110";
            energyText.text = "{:.1f}".format(systemEnergy);
        }
    };
    if (!MakeSB.__module__) Object.defineProperties(MakeSB, {
        __module__ : {value: null}
    });

    "112";
    async function MakeDB() {
        var ρσ_ls, old_bond, pos1, pos2, normal, perp, new_bond, enthalpyChange;
        "113";
        "114";
        setMol.disabled = true;
        "117";
        var ρσ_Iter3 = bond_list;
        ρσ_Iter3 = ((typeof ρσ_Iter3[Symbol.iterator] === "function") ? (ρσ_Iter3 instanceof Map ? ρσ_Iter3.keys() : ρσ_Iter3) : Object.keys(ρσ_Iter3));
        for (var ρσ_Index3 of ρσ_Iter3) {
            old_bond = ρσ_Index3;
            "118";
            if (ρσ_in(ρσ_getitem(old_bond.atoms, 0), sel_bond.atoms) && ρσ_in(ρσ_getitem(old_bond.atoms, 1), sel_bond.atoms)) {
                "119";
                old_bond.visible = false;
                "120";
                bond_list.remove(old_bond);
            }
        }
        "123";
        pos1 = ρσ_getitem(sel_bond.atoms, 1).pos;
        "124";
        pos2 = ρσ_getitem(sel_bond.atoms, 0).pos;
        "125";
        normal = pos2["-"](1["*"](pos1));
        "126";
        if ((normal.z !== 0 && (typeof normal.z !== "object" || ρσ_not_equals(normal.z, 0)))) {
            "127";
            perp = vector(0, 1, 1["-u"]()["*"](normal.y)["/"](normal.z));
            "128";
        } else {
            "129";
            perp = vector(normal.y, normal.x, 0);
        }
        "130";
        perp=perp["/"](sqrt(Math.pow(perp.x, 2)["+"](Math.pow(perp.y, 2))["+"](Math.pow(perp.z, 2))));
        "131";
        perp=perp["*"](.1);
        "132";
        new_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({color: color.gray(.8), radius: .05, atoms: sel_bond.atoms, double: true})]);
        "133";
        new_bond.append(ρσ_getitem(new_bond.atoms, 0).pos["-"](1["*"](perp)));
        "134";
        new_bond.append(ρσ_getitem(new_bond.atoms, 0).pos["+"](perp));
        "135";
        new_bond.append(ρσ_getitem(new_bond.atoms, 1).pos["+"](perp));
        "136";
        new_bond.append(ρσ_getitem(new_bond.atoms, 1).pos["-"](1["*"](perp)));
        "137";
        new_bond.append(ρσ_getitem(new_bond.atoms, 0).pos["-"](1["*"](perp)));
        "138";
        bond_list.append(new_bond);
        "139";
        (await DisableButton(db_button));
        "140";
        (await DisableButton(sb_button));
        "141";
        if (initialized) {
            "142";
            step=step["+"](1);
            "143";
            enthalpyChange = 1["-u"]()["*"]((await BondEnthalpy(ρσ_getitem(new_bond.atoms, 0), ρσ_getitem(new_bond.atoms, 1), new_bond.double)));
            "144";
            systemEnergy=systemEnergy["+"](enthalpyChange);
            "145";
            f1.plot(step, systemEnergy);
            "146";
            energyText.text = "{:.1f}".format(systemEnergy);
        }
    };
    if (!MakeDB.__module__) Object.defineProperties(MakeDB, {
        __module__ : {value: null}
    });

    "148";
    async function showActive() {
        var ρσ_ls, bond;
        "149";
        "150";
        print("\n===== \nACTIVE BONDS");
        "151";
        if (ρσ_equals(len(bond_list), 0)) {
            "152";
            print("No active bonds");
            "153";
        } else {
            "154";
            var ρσ_Iter4 = bond_list;
            ρσ_Iter4 = ((typeof ρσ_Iter4[Symbol.iterator] === "function") ? (ρσ_Iter4 instanceof Map ? ρσ_Iter4.keys() : ρσ_Iter4) : Object.keys(ρσ_Iter4));
            for (var ρσ_Index4 of ρσ_Iter4) {
                bond = ρσ_Index4;
                "155";
                if ((bond.double === true || typeof bond.double === "object" && ρσ_equals(bond.double, true))) {
                    "156";
                    print(ρσ_getitem(bond.atoms, 0).name, "=", ρσ_getitem(bond.atoms, 1).name);
                    "157";
                } else {
                    "158";
                    print(ρσ_getitem(bond.atoms, 0).name, "-", ρσ_getitem(bond.atoms, 1).name);
                }
            }
        }
    };
    if (!showActive.__module__) Object.defineProperties(showActive, {
        __module__ : {value: null}
    });

    "160";
    async function BondEnthalpy(atom1, atom2, double) {
        var ρσ_ls, el1, el2;
        "161";
        el1 = atom1.el;
        "162";
        el2 = atom2.el;
        "163";
        if ((el1 === "H" || typeof el1 === "object" && ρσ_equals(el1, "H")) && (el2 === "H" || typeof el2 === "object" && ρσ_equals(el2, "H"))) {
            "164";
            return 436;
            "165";
        }
        if ((el1 === "O" || typeof el1 === "object" && ρσ_equals(el1, "O")) && (el2 === "O" || typeof el2 === "object" && ρσ_equals(el2, "O"))) {
            "166";
            if ((double === true || typeof double === "object" && ρσ_equals(double, true))) {
                "167";
                return 495;
                "168";
            } else {
                "169";
                return 146;
                "170";
            }
        }
        if ((el1 === "C" || typeof el1 === "object" && ρσ_equals(el1, "C")) && (el2 === "C" || typeof el2 === "object" && ρσ_equals(el2, "C"))) {
            "171";
            if ((double === true || typeof double === "object" && ρσ_equals(double, true))) {
                "172";
                return 614;
                "173";
            } else {
                "174";
                return 348;
                "176";
            }
        }
        if ((el1 === "H" || typeof el1 === "object" && ρσ_equals(el1, "H"))) {
            "177";
            if ((el2 === "C" || typeof el2 === "object" && ρσ_equals(el2, "C"))) {
                "178";
                return 413;
                "179";
            } else if ((el2 === "O" || typeof el2 === "object" && ρσ_equals(el2, "O"))) {
                "180";
                return 463;
                "182";
            }
        }
        if ((el1 === "C" || typeof el1 === "object" && ρσ_equals(el1, "C"))) {
            "183";
            if ((el2 === "H" || typeof el2 === "object" && ρσ_equals(el2, "H"))) {
                "184";
                return 413;
                "185";
            } else if ((el2 === "O" || typeof el2 === "object" && ρσ_equals(el2, "O"))) {
                "186";
                if ((double === true || typeof double === "object" && ρσ_equals(double, true))) {
                    "187";
                    return 799;
                    "188";
                } else {
                    "189";
                    return 358;
                    "191";
                }
            }
        }
        if ((el1 === "O" || typeof el1 === "object" && ρσ_equals(el1, "O"))) {
            "192";
            if ((el2 === "H" || typeof el2 === "object" && ρσ_equals(el2, "H"))) {
                "193";
                return 463;
                "194";
            } else if ((el2 === "C" || typeof el2 === "object" && ρσ_equals(el2, "C"))) {
                "195";
                if ((double === true || typeof double === "object" && ρσ_equals(double, true))) {
                    "196";
                    return 799;
                    "197";
                } else {
                    "198";
                    return 358;
                }
            }
        }
    };
    if (!BondEnthalpy.__argnames__) Object.defineProperties(BondEnthalpy, {
        __argnames__ : {value: ["atom1", "atom2", "double"]},
        __module__ : {value: null}
    });

    "200";
    async function DisableButton(button) {
        "201";
        button.background = color.white;
        "202";
        button.disabled = true;
    };
    if (!DisableButton.__argnames__) Object.defineProperties(DisableButton, {
        __argnames__ : {value: ["button"]},
        __module__ : {value: null}
    });

    "204";
    async function EnableButton(btn) {
        "205";
        btn.background = color.white;
        "206";
        btn.disabled = false;
    };
    if (!EnableButton.__argnames__) Object.defineProperties(EnableButton, {
        __argnames__ : {value: ["btn"]},
        __module__ : {value: null}
    });

    "208";
    async function toggleScissor() {
        "209";
        "210";
        if (scissorMode) {
            "211";
            scissorMode = false;
            "212";
        } else {
            "213";
            scissorMode = true;
        }
    };
    if (!toggleScissor.__module__) Object.defineProperties(toggleScissor, {
        __module__ : {value: null}
    });

    "215";
    async function setMol(m) {
        var ρσ_ls, val, oldStartMol;
        "216";
        "217";
        val = m.selected;
        "218";
        oldStartMol = startMol;
        "219";
        if ((val === "CH4 + 2O2" || typeof val === "object" && ρσ_equals(val, "CH4 + 2O2"))) {
            "220";
            startMol = 1;
            "221";
        } else if ((val === "2CH4 + 4O2" || typeof val === "object" && ρσ_equals(val, "2CH4 + 4O2"))) {
            "222";
            startMol = 2;
            "223";
        }
        if ((startMol !== oldStartMol && (typeof startMol !== "object" || ρσ_not_equals(startMol, oldStartMol)))) {
            "224";
            (await Init());
        }
    };
    if (!setMol.__argnames__) Object.defineProperties(setMol, {
        __argnames__ : {value: ["m"]},
        __module__ : {value: null}
    });

    "226";
    async function Select() {
        var ρσ_ls, bondFound, bond;
        "227";
        "228";
        hit = partScreen.mouse.pick();
        "229";
        if ((AtomsSelected === 0 || typeof AtomsSelected === "object" && ρσ_equals(AtomsSelected, 0))) {
            "230";
            if ((lasthit !== null && (typeof lasthit !== "object" || ρσ_not_equals(lasthit, null)))) {
                "231";
                lasthit.color = lastcolor;
                "232";
            }
        } else if ((AtomsSelected === 1 || typeof AtomsSelected === "object" && ρσ_equals(AtomsSelected, 1))) {
            "233";
            if (!(ρσ_instanceof(hit, sphere))) {
                "234";
                lasthit.color = lastcolor;
                "235";
                prevAtom = null;
                "236";
                prevAtomColor = null;
                "237";
                AtomsSelected = 0;
                "238";
            }
        } else {
            "239";
            AtomsSelected = 0;
            "240";
            lasthit.color = lastcolor;
            "241";
            prevAtom.color = prevAtomColor;
            "242";
            prevAtom = null;
            "243";
            prevAtomColor = null;
            "244";
            sel_bond.color = color.gray(.8);
            "245";
            sel_bond = null;
            "247";
        }
        if ((hit !== null && (typeof hit !== "object" || ρσ_not_equals(hit, null)))) {
            "248";
            if ((lasthit !== hit && (typeof lasthit !== "object" || ρσ_not_equals(lasthit, hit)))) {
                "249";
                lasthit = hit;
                "250";
                lastcolor = vector(lasthit.color);
                "251";
            }
            if (ρσ_instanceof(hit, curve)) {
                "252";
                sel_bond = hit;
                "253";
                if (scissorMode) {
                    "254";
                    (await CutBond());
                    "255";
                } else {
                    "256";
                    (await EnableButton(cut_button));
                }
                "257";
                hit.color = color.orange;
                "258";
            } else if (ρσ_instanceof(hit, sphere)) {
                "259";
                if ((AtomsSelected === 0 || typeof AtomsSelected === "object" && ρσ_equals(AtomsSelected, 0))) {
                    "260";
                    prevAtom = hit;
                    "261";
                    prevAtomColor = hit.color;
                }
                "262";
                AtomsSelected=AtomsSelected["+"](1);
                "263";
                (await DisableButton(cut_button));
                "264";
                hit.color = color.cyan;
                "265";
                if ((AtomsSelected === 2 || typeof AtomsSelected === "object" && ρσ_equals(AtomsSelected, 2))) {
                    "266";
                    if ((hit !== prevAtom && (typeof hit !== "object" || ρσ_not_equals(hit, prevAtom)))) {
                        "267";
                        bondFound = false;
                        "268";
                        var ρσ_Iter5 = bond_list;
                        ρσ_Iter5 = ((typeof ρσ_Iter5[Symbol.iterator] === "function") ? (ρσ_Iter5 instanceof Map ? ρσ_Iter5.keys() : ρσ_Iter5) : Object.keys(ρσ_Iter5));
                        for (var ρσ_Index5 of ρσ_Iter5) {
                            bond = ρσ_Index5;
                            "269";
                            if (ρσ_in(hit, bond.atoms) && ρσ_in(prevAtom, bond.atoms)) {
                                "270";
                                if ((bond.visible === true || typeof bond.visible === "object" && ρσ_equals(bond.visible, true))) {
                                    "271";
                                    sel_bond = bond;
                                    "272";
                                    bond.color = color.orange;
                                    "273";
                                    (await EnableButton(cut_button));
                                    "274";
                                    bondFound = true;
                                    "275";
                                }
                            }
                        }
                        if (!bondFound) {
                            "276";
                            sel_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({atoms: ρσ_list_decorate([ hit, prevAtom ])})]);
                            "277";
                            (await EnableButton(sb_button));
                            "278";
                            (await EnableButton(db_button));
                            "279";
                        }
                    } else {
                        "280";
                        AtomsSelected = 1;
                        "281";
                        prevAtom = lasthit;
                        "282";
                        prevAtomColor = lastcolor;
                        "283";
                        sel_bond = null;
                        "285";
                    }
                }
            } else {
                "286";
                (await DisableButton(cut_button));
            }
            "287";
            drag = true;
            "289";
        } else {
            "290";
            AtomsSelected = 0;
            "291";
            prevAtom = null;
            "292";
            prevAtomColor = null;
            "293";
            if ((lasthit !== null && (typeof lasthit !== "object" || ρσ_not_equals(lasthit, null)))) {
                "294";
                lasthit.color = lastcolor;
                "295";
                lasthit = null;
            }
            "296";
            (await DisableButton(cut_button));
            "297";
            (await DisableButton(sb_button));
            "298";
            (await DisableButton(db_button));
        }
    };
    if (!Select.__module__) Object.defineProperties(Select, {
        __module__ : {value: null}
    });

    "300";
    async function mousemove() {
        var ρσ_ls, offset, bond;
        "301";
        "302";
        if (drag) {
            "303";
            setMol.disabled = true;
            "304";
            if (ρσ_instanceof(lasthit, sphere)) {
                "305";
                lasthit.pos = partScreen.mouse.pos;
                "306";
                var ρσ_Iter6 = bond_list;
                ρσ_Iter6 = ((typeof ρσ_Iter6[Symbol.iterator] === "function") ? (ρσ_Iter6 instanceof Map ? ρσ_Iter6.keys() : ρσ_Iter6) : Object.keys(ρσ_Iter6));
                for (var ρσ_Index6 of ρσ_Iter6) {
                    bond = ρσ_Index6;
                    "307";
                    if (!bond.double) {
                        "308";
                        if ((ρσ_getitem(bond.atoms, 0) === lasthit || typeof ρσ_getitem(bond.atoms, 0) === "object" && ρσ_equals(ρσ_getitem(bond.atoms, 0), lasthit))) {
                            "309";
                            ρσ_interpolate_kwargs.call(bond, bond.modify, [0].concat([ρσ_desugar_kwargs({pos: lasthit.pos})]));
                            "310";
                        }
                        if ((ρσ_getitem(bond.atoms, 1) === lasthit || typeof ρσ_getitem(bond.atoms, 1) === "object" && ρσ_equals(ρσ_getitem(bond.atoms, 1), lasthit))) {
                            "311";
                            ρσ_interpolate_kwargs.call(bond, bond.modify, [1].concat([ρσ_desugar_kwargs({pos: lasthit.pos})]));
                            "312";
                        }
                    } else {
                        "313";
                        if ((ρσ_getitem(bond.atoms, 0) === lasthit || typeof ρσ_getitem(bond.atoms, 0) === "object" && ρσ_equals(ρσ_getitem(bond.atoms, 0), lasthit))) {
                            "314";
                            offset = bond.point(0).pos["-"](1["*"](bond.point(1).pos));
                            "315";
                            ρσ_interpolate_kwargs.call(bond, bond.modify, [0].concat([ρσ_desugar_kwargs({pos: lasthit.pos["+"](offset["/"](2))})]));
                            "316";
                            ρσ_interpolate_kwargs.call(bond, bond.modify, [1].concat([ρσ_desugar_kwargs({pos: lasthit.pos["-"](1["*"](offset)["/"](2))})]));
                            "317";
                            ρσ_interpolate_kwargs.call(bond, bond.modify, [1["-u"]()["*"](1)].concat([ρσ_desugar_kwargs({pos: lasthit.pos["+"](offset["/"](2))})]));
                            "318";
                        }
                        if ((ρσ_getitem(bond.atoms, 1) === lasthit || typeof ρσ_getitem(bond.atoms, 1) === "object" && ρσ_equals(ρσ_getitem(bond.atoms, 1), lasthit))) {
                            "319";
                            offset = bond.point(3).pos["-"](1["*"](bond.point(2).pos));
                            "320";
                            ρσ_interpolate_kwargs.call(bond, bond.modify, [2].concat([ρσ_desugar_kwargs({pos: lasthit.pos["-"](1["*"](offset)["/"](2))})]));
                            "321";
                            ρσ_interpolate_kwargs.call(bond, bond.modify, [3].concat([ρσ_desugar_kwargs({pos: lasthit.pos["+"](offset["/"](2))})]));
                        }
                    }
                }
            }
        }
    };
    if (!mousemove.__module__) Object.defineProperties(mousemove, {
        __module__ : {value: null}
    });

    "323";
    async function mouseup() {
        "324";
        "325";
        drag = false;
    };
    if (!mouseup.__module__) Object.defineProperties(mouseup, {
        __module__ : {value: null}
    });

    "327";
    partScreen.bind("mousemove", mousemove);
    "328";
    partScreen.bind("mouseup", mouseup);
    "329";
    partScreen.bind("mousedown", Select);
    "331";
    async function Init() {
        var ρσ_ls, object, bond, H_radius, O_radius, C_radius;
        "332";
        "334";
        initialized = false;
        "337";
        var ρσ_Iter7 = ρσ_list_decorate([ c1_atom, c2_atom, h1_atom, h2_atom, h3_atom, h4_atom, h5_atom, h6_atom, h7_atom, h8_atom, o1_atom, o2_atom, o3_atom, o4_atom, o5_atom, o6_atom, o7_atom, o8_atom ]);
        ρσ_Iter7 = ((typeof ρσ_Iter7[Symbol.iterator] === "function") ? (ρσ_Iter7 instanceof Map ? ρσ_Iter7.keys() : ρσ_Iter7) : Object.keys(ρσ_Iter7));
        for (var ρσ_Index7 of ρσ_Iter7) {
            object = ρσ_Index7;
            "338";
            if ((object !== null && (typeof object !== "object" || ρσ_not_equals(object, null)))) {
                "339";
                object.visible = false;
                "340";
                object = undefined;
            }
        }
        "341";
        var ρσ_Iter8 = bond_list;
        ρσ_Iter8 = ((typeof ρσ_Iter8[Symbol.iterator] === "function") ? (ρσ_Iter8 instanceof Map ? ρσ_Iter8.keys() : ρσ_Iter8) : Object.keys(ρσ_Iter8));
        for (var ρσ_Index8 of ρσ_Iter8) {
            bond = ρσ_Index8;
            "343";
            bond.visible = false;
            "344";
            bond = undefined;
        }
        "345";
        bond_list = ρσ_list_decorate([]);
        "347";
        H_radius = 1.2["/"](2);
        O_radius = 1.52["/"](2);
        C_radius = 1.7["/"](2);
        "349";
        c1_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(1["-u"]()["*"](5), 0, 0), color: color.gray(.3), radius: C_radius, name: "C1", el: "C"})]);
        "350";
        h1_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(1["-u"]()["*"](7), 0, 0), color: color.white, radius: H_radius, name: "H1", el: "H"})]);
        "351";
        h2_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(1["-u"]()["*"](3), 0, 0), color: color.white, radius: H_radius, name: "H2", el: "H"})]);
        "352";
        h3_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(1["-u"]()["*"](5), 2, 0), color: color.white, radius: H_radius, name: "H3", el: "H"})]);
        "353";
        h4_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(1["-u"]()["*"](5), 1["-u"]()["*"](2), 0), color: color.white, radius: H_radius, name: "H4", el: "H"})]);
        "355";
        o1_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(0, 1, 0), color: color.red, radius: O_radius, name: "O1", el: "O"})]);
        "356";
        o2_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(0, 1["-u"]()["*"](1), 0), color: color.red, radius: O_radius, name: "O2", el: "O"})]);
        "358";
        o3_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(4, 0, 0), color: color.red, radius: O_radius, name: "O3", el: "O"})]);
        "359";
        o4_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(6, 0, 0), color: color.red, radius: O_radius, name: "O4", el: "O"})]);
        "361";
        if ((startMol === 2 || typeof startMol === "object" && ρσ_equals(startMol, 2))) {
            "362";
            c2_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(2.5, 5, 0), color: color.gray(.3), radius: C_radius, name: "C1", el: "C"})]);
            "363";
            h5_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(.5, 5, 0), color: color.white, radius: H_radius, name: "H5", el: "H"})]);
            "364";
            h6_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(4.5, 5, 0), color: color.white, radius: H_radius, name: "H6", el: "H"})]);
            "365";
            h7_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(2.5, 3, 0), color: color.white, radius: H_radius, name: "H7", el: "H"})]);
            "366";
            h8_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(2.5, 7, 0), color: color.white, radius: H_radius, name: "H8", el: "H"})]);
            "368";
            o5_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(1["-u"]()["*"](1), 1["-u"]()["*"](4), 0), color: color.red, radius: O_radius, name: "O1", el: "O"})]);
            "369";
            o6_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(1, 1["-u"]()["*"](4), 0), color: color.red, radius: O_radius, name: "O2", el: "O"})]);
            "371";
            o7_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(5, 1["-u"]()["*"](3), 0), color: color.red, radius: O_radius, name: "O3", el: "O"})]);
            "372";
            o8_atom = ρσ_interpolate_kwargs.call(this, sphere, [ρσ_desugar_kwargs({pos: vector(5, 1["-u"]()["*"](5), 0), color: color.red, radius: O_radius, name: "O4", el: "O"})]);
        }
        "376";
        sel_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({atoms: ρσ_list_decorate([ c1_atom, h1_atom ]), double: false})]);
        "377";
        (await MakeSB());
        "378";
        sel_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({atoms: ρσ_list_decorate([ c1_atom, h2_atom ]), double: false})]);
        "379";
        (await MakeSB());
        "380";
        sel_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({atoms: ρσ_list_decorate([ c1_atom, h3_atom ]), double: false})]);
        "381";
        (await MakeSB());
        "382";
        sel_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({atoms: ρσ_list_decorate([ c1_atom, h4_atom ]), double: false})]);
        "383";
        (await MakeSB());
        "384";
        sel_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({atoms: ρσ_list_decorate([ o1_atom, o2_atom ]), double: true})]);
        "385";
        (await MakeDB());
        "386";
        sel_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({atoms: ρσ_list_decorate([ o3_atom, o4_atom ]), double: true})]);
        "387";
        (await MakeDB());
        "389";
        if ((startMol === 2 || typeof startMol === "object" && ρσ_equals(startMol, 2))) {
            "390";
            sel_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({atoms: ρσ_list_decorate([ c2_atom, h5_atom ]), double: false})]);
            "391";
            (await MakeSB());
            "392";
            sel_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({atoms: ρσ_list_decorate([ c2_atom, h6_atom ]), double: false})]);
            "393";
            (await MakeSB());
            "394";
            sel_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({atoms: ρσ_list_decorate([ c2_atom, h7_atom ]), double: false})]);
            "395";
            (await MakeSB());
            "396";
            sel_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({atoms: ρσ_list_decorate([ c2_atom, h8_atom ]), double: false})]);
            "397";
            (await MakeSB());
            "398";
            sel_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({atoms: ρσ_list_decorate([ o5_atom, o6_atom ]), double: true})]);
            "399";
            (await MakeDB());
            "400";
            sel_bond = ρσ_interpolate_kwargs.call(this, curve, [ρσ_desugar_kwargs({atoms: ρσ_list_decorate([ o7_atom, o8_atom ]), double: true})]);
            "401";
            (await MakeDB());
            "402";
            partScreen.range = 12;
            "403";
        } else {
            "404";
            partScreen.range = 9;
        }
        "406";
        setMol.disabled = false;
        "407";
        initialized = true;
    };
    if (!Init.__module__) Object.defineProperties(Init, {
        __module__ : {value: null}
    });

    "410";
    async function resetEnergy() {
        var ρσ_ls, sel_bond;
        "411";
        "412";
        step = 0;
        "413";
        systemEnergy = 0;
        "414";
        f1.remove();
        "415";
        f1 = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: Egraph, color: vec(random(), random(), random())})]);
        "416";
        f1.plot(0, systemEnergy);
        "417";
        energyText.text = "{:.1f}".format(systemEnergy);
        "419";
        AtomsSelected = 0;
        "420";
        lasthit.color = lastcolor;
        "421";
        prevAtom.color = prevAtomColor;
        "422";
        prevAtom = null;
        "423";
        prevAtomColor = null;
        "424";
        sel_bond.color = color.gray(.8);
        "425";
        sel_bond = null;
        "426";
        (await DisableButton(cut_button));
        "427";
        (await DisableButton(sb_button));
        "428";
        (await DisableButton(db_button));
    };
    if (!resetEnergy.__module__) Object.defineProperties(resetEnergy, {
        __module__ : {value: null}
    });

    "430";
    async function restart() {
        "431";
        "432";
        f1.remove();
        "433";
        step = 0;
        "434";
        systemEnergy = 0;
        "435";
        (await Init());
        "436";
        f1 = ρσ_interpolate_kwargs.call(this, gcurve, [ρσ_desugar_kwargs({graph: Egraph, color: vec(random(), random(), random())})]);
        "437";
        f1.plot(0, systemEnergy);
        "438";
        energyText.text = "{:.1f}".format(systemEnergy);
    };
            if (!restart.__module__) Object.defineProperties(restart, {
                __module__ : {value: null}
            });
        
        };
        if (!__main__.__module__) Object.defineProperties(__main__, {
            __module__ : {value: null}
        });
  
        ;$(function(){ window.__context = { glowscript_container: $("#glowscriptdiv")}; __main__() })})()
        // END JAVASCRIPT
        
        //--><!]]></script>
        </div> 
</body>

